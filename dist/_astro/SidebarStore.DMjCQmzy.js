let l=[],h=(o,a)=>{let u=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},l:a||0,lc:0,listen(i,n){return t.lc=u.push(i,n||t.l)/2,()=>{let f=u.indexOf(i);~f&&(u.splice(f,2),--t.lc||t.off())}},notify(i,n){let f=!l.length;for(let e=0;e<u.length;e+=2)l.push(u[e],u[e+1],t.value,i,n);if(f){for(let e=0;e<l.length;e+=5){let s;for(let r=e+1;!s&&(r+=5)<l.length;)l[r]<l[e+1]&&(s=l.push(l[e],l[e+1],l[e+2],l[e+3],l[e+4]));s||l[e](l[e+2],l[e+3],l[e+4])}l.length=0}},off(){},set(i){let n=t.value;n!==i&&(t.value=i,t.notify(n))},subscribe(i,n){let f=t.listen(i,n);return i(t.value),f},value:o};return t};const c=h(!1);export{c as i};
